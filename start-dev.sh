#!/bin/bash

# Script de d√©marrage pour le d√©veloppement
# Usage: ./start-dev.sh

echo "üöÄ D√©marrage de l'annuaire d'entreprises du Qu√©bec"
echo "=================================================="
echo ""

# V√©rifier que les d√©pendances sont install√©es
if [ ! -d "node_modules" ]; then
  echo "üì¶ Installation des d√©pendances..."
  npm install
  echo ""
fi

# V√©rifier la cl√© API Google
if ! grep -q "GOOGLE_PLACES_API_KEY=AIzaSy" .env 2>/dev/null; then
  echo "‚ö†Ô∏è  ATTENTION: Cl√© API Google Places non trouv√©e dans .env"
  echo "   L'import Google Business ne fonctionnera pas."
  echo ""
fi

# Exporter les variables d'environnement
export $(cat .env | grep -v '^#' | xargs)

echo "‚úÖ Configuration charg√©e"
echo ""
echo "D√©marrage des serveurs:"
echo "  ‚Ä¢ Frontend Vite sur http://192.168.2.226:5173"
echo "  ‚Ä¢ Backend proxy sur http://localhost:3001"
echo ""
echo "=================================================="
echo ""
echo "üí° Appuyez sur Ctrl+C pour arr√™ter les serveurs"
echo ""

# D√©marrer les deux serveurs
npm run dev:all
