import { createClient } from '@supabase/supabase-js';
import dotenv from 'dotenv';

dotenv.config();

const supabase = createClient(
  process.env.VITE_SUPABASE_URL,
  process.env.SUPABASE_SERVICE_ROLE_KEY || process.env.VITE_SUPABASE_ANON_KEY
);

async function addShowAddressColumn() {
  console.log('üîß Ajout de la colonne show_address...\n');

  try {
    // Utiliser RPC pour ex√©cuter du SQL brut (n√©cessite une fonction RPC cr√©√©e dans Supabase)
    // Ou utiliser l'API REST directement

    console.log('‚ö†Ô∏è  Cette migration doit √™tre ex√©cut√©e dans Supabase SQL Editor:\n');
    console.log('ALTER TABLE businesses ADD COLUMN IF NOT EXISTS show_address BOOLEAN DEFAULT TRUE;');
    console.log('\nCette colonne contr√¥le si l\'adresse est affich√©e sur la fiche publique.');
    console.log('Par d√©faut: TRUE (afficher l\'adresse pour toutes les entreprises existantes)');

  } catch (error) {
    console.error('Erreur:', error);
  }
}

addShowAddressColumn();
