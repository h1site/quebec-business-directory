-- =====================================================
-- ðŸ”§ SCRIPT DE CORRECTION BUSINESS_CLAIMS
-- =====================================================
-- Ã€ exÃ©cuter dans Supabase SQL Editor
-- Sans danger - utilise IF NOT EXISTS
-- =====================================================

-- Ajouter les colonnes manquantes
ALTER TABLE business_claims ADD COLUMN IF NOT EXISTS user_email VARCHAR(255);
ALTER TABLE business_claims ADD COLUMN IF NOT EXISTS user_name VARCHAR(255);
ALTER TABLE business_claims ADD COLUMN IF NOT EXISTS user_phone VARCHAR(50);
ALTER TABLE business_claims ADD COLUMN IF NOT EXISTS verification_method VARCHAR(50);
ALTER TABLE business_claims ADD COLUMN IF NOT EXISTS verification_data JSONB;
ALTER TABLE business_claims ADD COLUMN IF NOT EXISTS notes TEXT;

-- VÃ©rifier que tout est OK (rÃ©sultat affichÃ© en bas)
SELECT
  column_name,
  data_type,
  CASE
    WHEN column_name IN ('user_email', 'user_name', 'user_phone', 'verification_method', 'verification_data', 'notes')
    THEN 'âœ… AJOUTÃ‰E'
    ELSE '  '
  END as status
FROM information_schema.columns
WHERE table_name = 'business_claims'
ORDER BY ordinal_position;

-- =====================================================
-- âœ… AprÃ¨s exÃ©cution, vous devriez voir:
--    - user_email âœ…
--    - user_name âœ…
--    - user_phone âœ…
--    - verification_method âœ…
--    - verification_data âœ…
--    - notes âœ…
-- =====================================================
