# Impl√©mentation: Heures d'ouverture (Opening Hours)

## Statut: 80% Compl√©t√©

### ‚úÖ Termin√©:

1. **Migration SQL** - `scripts/add-opening-hours.sql`
   - Colonne `opening_hours` (JSONB, NULL par d√©faut)
   - Index GIN pour performance
   - Vue `businesses_enriched` mise √† jour

2. **Composant Wizard** - `src/components/CreateBusiness/components/WizardStep6_Hours.jsx`
   - Interface compl√®te pour d√©finir les heures
   - Bouton "Copier √† tous les jours"
   - Option pour sauter les heures (optionnel)
   - Responsive mobile

3. **Wizard mis √† jour** - `src/components/CreateBusiness/CreateBusinessWizard.jsx`
   - Import de WizardStep6_Hours
   - TOTAL_STEPS = 8 (ajout d'1 √©tape)
   - opening_hours dans formData
   - Case 5 ajout√© pour WizardStep6_Hours

4. **EditBusiness mis √† jour** - `src/pages/Dashboard/EditBusiness.jsx`
   - Onglet "Horaires" avec emoji üïê
   - opening_hours dans form state
   - opening_hours charg√© depuis business data
   - Case 'hours' dans saveTab()
   - UI compl√®te inline avec gestion des jours

### ‚ö†Ô∏è √Ä COMPL√âTER:

#### 1. Affichage sur BusinessDetails.jsx

Ajouter l'affichage des heures d'ouverture dans la sidebar, apr√®s la section contact:

```jsx
{/* Opening Hours Section */}
{business.opening_hours && (
  <div className="contact-section">
    <h3 className="sidebar-title">{t('business.openingHours')}</h3>
    <div className="hours-list">
      {Object.entries(business.opening_hours).map(([day, hours]) => (
        <div key={day} className="hours-item">
          <span className="hours-day">{t(`business.days.${day}`)}</span>
          <span className="hours-time">
            {hours.closed
              ? t('business.closed')
              : `${hours.open} - ${hours.close}`
            }
          </span>
        </div>
      ))}
    </div>
  </div>
)}
```

**CSS √† ajouter dans BusinessDetails.css:**

```css
.hours-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.hours-item {
  display: flex;
  justify-content: space-between;
  padding: 0.5rem 0;
  border-bottom: 1px solid #e2e8f0;
}

.hours-item:last-child {
  border-bottom: none;
}

.hours-day {
  font-weight: 600;
  text-transform: capitalize;
  color: #475569;
}

.hours-time {
  color: #64748b;
}
```

#### 2. Traductions i18n.js

**Localisation**: Apr√®s `step5` dans wizard section

**FRAN√áAIS** (apr√®s ligne ~480):

```javascript
step6_hours: {
  title: 'Heures d\'ouverture',
  description: 'Indiquez vos heures d\'ouverture (optionnel)',
  optionalMessage: 'Les heures d\'ouverture sont optionnelles. Vous pouvez les ajouter maintenant ou plus tard.',
  addHours: 'Ajouter les heures d\'ouverture',
  skipHours: 'Ne pas afficher les heures d\'ouverture',
  closed: 'Ferm√©',
  copyToAll: 'Copier √† tous les jours',
  days: {
    monday: 'Lundi',
    tuesday: 'Mardi',
    wednesday: 'Mercredi',
    thursday: 'Jeudi',
    friday: 'Vendredi',
    saturday: 'Samedi',
    sunday: 'Dimanche'
  }
},
```

**ANGLAIS** (apr√®s ligne ~1100):

```javascript
step6_hours: {
  title: 'Opening Hours',
  description: 'Set your opening hours (optional)',
  optionalMessage: 'Opening hours are optional. You can add them now or later.',
  addHours: 'Add opening hours',
  skipHours: 'Don\'t display opening hours',
  closed: 'Closed',
  copyToAll: 'Copy to all days',
  days: {
    monday: 'Monday',
    tuesday: 'Tuesday',
    wednesday: 'Wednesday',
    thursday: 'Thursday',
    friday: 'Friday',
    saturday: 'Saturday',
    sunday: 'Sunday'
  }
},
```

**EditBusiness translations (FR):**

```javascript
editBusiness: {
  // ... existing translations
  hours: 'Horaires',
  noHoursSet: 'Aucune heure d\'ouverture d√©finie',
  addHours: 'Ajouter les heures',
  removeHours: 'Ne pas afficher les heures d\'ouverture',
  saveHours: 'Sauvegarder les horaires',
  // ...
}
```

**EditBusiness translations (EN):**

```javascript
editBusiness: {
  // ... existing translations
  hours: 'Hours',
  noHoursSet: 'No opening hours set',
  addHours: 'Add hours',
  removeHours: 'Don\'t display opening hours',
  saveHours: 'Save hours',
  // ...
}
```

**BusinessDetails translations (FR):**

```javascript
business: {
  // ... existing translations
  openingHours: 'Heures d\'ouverture',
  closed: 'Ferm√©',
  days: {
    monday: 'Lundi',
    tuesday: 'Mardi',
    wednesday: 'Mercredi',
    thursday: 'Jeudi',
    friday: 'Vendredi',
    saturday: 'Samedi',
    sunday: 'Dimanche'
  },
  // ...
}
```

**BusinessDetails translations (EN):**

```javascript
business: {
  // ... existing translations
  openingHours: 'Opening Hours',
  closed: 'Closed',
  days: {
    monday: 'Monday',
    tuesday: 'Tuesday',
    wednesday: 'Wednesday',
    thursday: 'Thursday',
    friday: 'Friday',
    saturday: 'Saturday',
    sunday: 'Sunday'
  },
  // ...
}
```

### üìã Steps pour compl√©ter:

1. **Ex√©cuter la migration SQL dans Supabase**:
   ```sql
   -- Voir scripts/add-opening-hours.sql
   ```

2. **Ajouter l'affichage dans BusinessDetails.jsx** (voir code ci-dessus)

3. **Ajouter les traductions dans i18n.js** (voir traductions ci-dessus)

4. **Build et test**:
   ```bash
   npm run build
   npm run dev
   ```

5. **Tester**:
   - Cr√©er une nouvelle entreprise avec heures
   - Modifier les heures d'une entreprise existante
   - V√©rifier l'affichage sur la page de d√©tails
   - Tester sans heures (optionnel)

### üéØ Format JSON des heures:

```json
{
  "monday": {"open": "09:00", "close": "17:00", "closed": false},
  "tuesday": {"open": "09:00", "close": "17:00", "closed": false},
  "wednesday": {"open": "09:00", "close": "17:00", "closed": false},
  "thursday": {"open": "09:00", "close": "17:00", "closed": false},
  "friday": {"open": "09:00", "close": "17:00", "closed": false},
  "saturday": {"open": "10:00", "close": "16:00", "closed": false},
  "sunday": {"open": "", "close": "", "closed": true}
}
```

### üìÅ Fichiers modifi√©s:

- ‚úÖ `scripts/add-opening-hours.sql`
- ‚úÖ `src/components/CreateBusiness/components/WizardStep6_Hours.jsx`
- ‚úÖ `src/components/CreateBusiness/CreateBusinessWizard.jsx`
- ‚úÖ `src/pages/Dashboard/EditBusiness.jsx`
- ‚ö†Ô∏è `src/pages/BusinessDetails.jsx` (√† compl√©ter)
- ‚ö†Ô∏è `src/services/i18n.js` (√† compl√©ter)
- ‚ö†Ô∏è `src/pages/BusinessDetails.css` (√† compl√©ter)
